# -*- coding: utf-8 -*-
"""Insurance DA report.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1InwADU1XghBwU_TSAY0rMzB-GlLVDVMn

#RISK PREMIUM IN MOTOR VEHICLE INSURANCE

The **pure premium or risk premium** is the premium that would exactly meet
the expected cost of the risk covered ignoring management expenses, commissions,
contingency loading, etc

Claim frequency rate and mean claim size are required for estimation in calculating risk premiums.

In this study, I discussed to estimate claim frequency rate and mean claim
size with several methods and calculated risk premiums. 


**Key words:** Number of Claims, Claim Sizes, Claim Frequency Rate, Risk
Premium.

Dataset, which supported my study, is provided by insurance company involving with motor vehicle insurance. I took the dataset from kanggle webisite

#1. Introduction

**Insurance** is an important part of risk management programs for
organisations and individuals. Insurance is a risk financing transfer under which an **insurer** agrees to accept **financial burdens **arising from **loss**. More formally, **insurance** can be defined as a **contractual** agreement between two parties: the **insurer** and the **insured**.

Insurance may be **classified** into **three groups** – **insurance of person**,
**insurance of property** and **pecuniary interest**, and **insurance of liability**. General insurance, or Non-Life insurance or Property/Casualty insurance as it is sometimes called, normally relates to the insurance of property and liability.

In this study, we are interested in **motor vehicle insurance**. Motor
vehicle insurance contracts are schedule contracts that the permit the
insured to purchase both property and liability insurance under one
policy. The **contract** can be **divided**, however, in **two separate contracts**  one providing insurance against physical damage to automobiles, and the other protecting against potential liability arising out of the ownership, maintenance, or use of an automobile. Some automobile insurance
contracts, notably those issued by insurers associated with automobile
finance companies, cover only physical damage insurance.

#2. The Risk Premium

The **pure premium or risk premium** is the premium that would exactly
meet the expected cost of the risk covered ignoring management expenses,
commissions, contingency loading, etc. **To compute it**, we need to estimate the **claim frequency rate** and **mean claim size**. Multiplying **claim frequency rate** by **mean claim size** yields the **risk premium**.

A **claim** is an assertion of a right to payment, as when a customer
notifies a manufacturer of an injury from a defective product and expenses a
belief that the injury justifies compensation. Usually, the payment is to occur at some future point in time. It should not be assumed that all accidents become
claims, nor that the **amount of the claim** will always be the **same** as the **amount of the damage**.

The **claim size** is the sum, which the **insurer** has to **pay** on the
**occurrence** of a **fire**, an **accident**, death or some other **insured even**t. The sum of the individual claims constitutes the aggregate claim amount, which is one of the key concerns, both in the practical management of an insurance company and in theoretical consideration.

The **claim frequency rate** is a rate which can be estimated as the number
of claims divided by the number of units of exposure.

It is important that the two components, claim frequency rate and claim
size be considered separately. Only in exceptional circumstances can the use of
‘rate of payment of claims’ be considered satisfactory for the assessment of a
risk premium

#3. Method of Study

Analysis is based on simple formulations as follows (Hossack, 1989: 123-125):
"""

import pandas as pd
import matplotlib.pyplot as plt
import numpy as np
import scipy

df = pd.read_excel("AutoInsurance.xlsx")

df.columns

#getting rid of the time in the dataset
df['Effective To Date']=pd.to_datetime(df['Effective To Date'])

df.head()

"""#  **CLAIM MEAN SIZE**

1. Depending on yearly total claim sizes and number of claims, mean
claim sizes for each year can be calculated by the formula 

**MCS = TCS/C**

Where

*   **MCS**: Mean claim size in year i
*   **TCS**: Total claim size in year i
*   **C**: Number of claims for each year
"""

#Mean claim size from Jan to feb 2011

df.describe()["Total Claim Amount"][1:2]

#mean claim size for each state
df.groupby(['State']).mean()['Total Claim Amount']

#mean claim size for each Responce
df.groupby(['Response']).mean()['Total Claim Amount']

#mean claim size for each Coverange
df.groupby(['Coverage']).mean()['Total Claim Amount']

#mean claim size for each Education

df.groupby(['Education']).mean()['Total Claim Amount']

#mean claim size for each EmploymentStatus	

df.groupby(['EmploymentStatus']).mean()['Total Claim Amount']

#mean claim size for each Gender	

df.groupby(['Gender']).mean()['Total Claim Amount']

#mean claim size for each Vehicle Size
	

df.groupby(['Vehicle Size']).mean()['Total Claim Amount']

#mean claim size for each Policy
	

df.groupby(['Policy']).mean()['Total Claim Amount']

#mean claim size for each Policy Type
	

df.groupby(['Policy Type']).mean()['Total Claim Amount']

#mean claim size for each Vehicle Class	
	

df.groupby(['Vehicle Class']).mean()['Total Claim Amount']

"""#  **Average office premium per policies**

2. Depending on yearly total amount of premiums and number of policies, average office premium per policy for each year can be calculated by the formula

AOP = TOP/N

**Where**:

*   **AOP** : average office premium per policies for year i. 
*   **TOP** : total amount of premiums for year i
*   **N** : number of policies in year i
"""

df.columns

"""**Average office premium per policies for each state**"""

#average office premium per policies for each state.
df_premiuns = df.groupby(["State"]).sum()[['Monthly Premium Auto', 'Number of Policies']]
df_premiuns["Avg office premium per policies"] = df_premiuns["Monthly Premium Auto"]/df_premiuns['Number of Policies']
df_premiuns

"""**average office premium per policies for each Response**"""

#average office premium per policies for each Response.
df_premiunR = df.groupby(["Response"]).sum()[['Monthly Premium Auto', 'Number of Policies']]
df_premiunR["Avg office premium per policies"] = df_premiunR["Monthly Premium Auto"]/df_premiunR['Number of Policies']
df_premiunR

"""**average office premium per policies for each Coverage**"""

#average office premium per policies for each Coverage.
df_premiunC = df.groupby(["Coverage"]).sum()[['Monthly Premium Auto', 'Number of Policies']]
df_premiunC["Avg office premium per policies"] = df_premiunC["Monthly Premium Auto"]/df_premiunC['Number of Policies']
df_premiunC

df_premiunC.plot(kind="bar")

"""**Average office premium per policies for each Education**"""

#average office premium per policies for each Education
df_premiunE = df.groupby(["Education"]).sum()[['Monthly Premium Auto', 'Number of Policies']]
df_premiunE["Avg office premium per policies"] = df_premiunE["Monthly Premium Auto"]/df_premiunE['Number of Policies']
df_premiunE

#average office premium per policies for each EmploymentStatus
df_premiunES = df.groupby(["EmploymentStatus"]).sum()[['Monthly Premium Auto', 'Number of Policies']]
df_premiunES["Avg office premium per policies"] = df_premiunES["Monthly Premium Auto"]/df_premiunES['Number of Policies']
df_premiunES

#average office premium per policies for each Gender
df_premiunG = df.groupby(["Gender"]).sum()[['Monthly Premium Auto', 'Number of Policies']]
df_premiunG["Avg office premium per policies"] = df_premiunG["Monthly Premium Auto"]/df_premiunG['Number of Policies']
df_premiunG

#average office premium per policies for each Vehicle Size
df_premiunVS = df.groupby(["Vehicle Size"]).sum()[['Monthly Premium Auto', 'Number of Policies']]
df_premiunVS["Avg office premium per policies"] = df_premiunVS["Monthly Premium Auto"]/df_premiunVS['Number of Policies']
df_premiunVS

"""**average office premium per policies for each Policy Type**"""

#average office premium per policies for each Policy Type
df_premiunPT = df.groupby(["Policy Type"]).sum()[['Monthly Premium Auto', 'Number of Policies']]
df_premiunPT["Avg office premium per policies"] = df_premiunPT["Monthly Premium Auto"]/df_premiunPT['Number of Policies']
df_premiunPT

plt.pie(df_premiunPT["Avg office premium per policies"], labels=df_premiunPT.index, autopct="%1.1f%%",explode=[0.1,0.1,0], shadow=True, startangle=90)
plt.show()

"""**average office premium per policies for each Vehicle Class**"""

#average office premium per policies for each Vehicle Class
df_premiunVC = df.groupby(["Vehicle Class"]).sum()[['Monthly Premium Auto', 'Number of Policies']]
df_premiunVC["Avg office premium per policies"] = df_premiunVC["Monthly Premium Auto"]/df_premiunVC['Number of Policies']
df_premiunVC

plt.pie(df_premiunVC["Avg office premium per policies"], labels=df_premiunVC.index, autopct="%1.1f%%",explode=[0,0.1,0,0,0,0.1], shadow=True, startangle=90)
plt.figure(figsize=(40,10))
plt.show()











"""#  **Risk Premium (RP)**

3. Depending on yearly total claim sizes and number of policies, risk
premium for each year can be calculated by the formula

RP = TCS/N

**Where**:

*   **RP**: Risk Premium for year i
*   **TCS**: Total Claim size for year i
*   **N**: Number of policies in year i
"""

df.columns

"""**Calculating the risk premium per state**"""

df1 = df.groupby(['State']).sum()[['Total Claim Amount']]
df2 = df.groupby(['State']).count()[['Number of Policies']]
#adding the two dataset together
df_riskpremiumstate = df1.merge(df2, on=df1.index)
#renaming the columns
df_riskpremiumstate.rename(columns={'key_0':'State'}, inplace=True)
#setting state to index
df_riskpremiumstate.set_index("State", inplace=True)
#calculating the risk premium per state
df_riskpremiumstate['Total Claim Amount'] = df_riskpremiumstate['Total Claim Amount'].round(0)
df_riskpremiumstate["Risk Premium"] = df_riskpremiumstate['Total Claim Amount']/df_riskpremiumstate['Number of Policies']
df_riskpremiumstate

"""**Calculating the risk premium per Response**"""

df1 = df.groupby(['Response']).sum()[['Total Claim Amount']]
df2 = df.groupby(['Response']).count()[['Number of Policies']]
#adding the two dataset together
df_riskpremiumResponse = df1.merge(df2, on=df1.index)
#renaming the columns
df_riskpremiumResponse.rename(columns={'key_0':'Response'}, inplace=True)
#setting state to index
df_riskpremiumResponse.set_index("Response", inplace=True)
#calculating the risk premium per Response
df_riskpremiumResponse['Total Claim Amount'] = df_riskpremiumResponse['Total Claim Amount'].round(0)
df_riskpremiumResponse["Risk Premium"] = df_riskpremiumResponse['Total Claim Amount']/df_riskpremiumResponse['Number of Policies']
df_riskpremiumResponse

"""**Calculating the risk premium per Education**"""

df1 = df.groupby(['Education']).sum()[['Total Claim Amount']]
df2 = df.groupby(['Education']).count()[['Number of Policies']]
#adding the two dataset together
df_riskpremiumEducation = df1.merge(df2, on=df1.index)
#renaming the columns
df_riskpremiumEducation.rename(columns={'key_0':'Education'}, inplace=True)
#setting state to index
df_riskpremiumEducation.set_index("Education", inplace=True)
#calculating the risk premium per Education
df_riskpremiumEducation['Total Claim Amount'] = df_riskpremiumEducation['Total Claim Amount'].round(0) #round off to the whole number
#find the risk premium
df_riskpremiumEducation["Risk Premium"] = df_riskpremiumEducation['Total Claim Amount']/df_riskpremiumEducation['Number of Policies']
df_riskpremiumEducation

"""**Calculating the risk premium per EmploymentStatus**"""

df1 = df.groupby(['EmploymentStatus']).sum()[['Total Claim Amount']]
df2 = df.groupby(['EmploymentStatus']).count()[['Number of Policies']]
#adding the two dataset together
df_riskpremiumEmploymentStatus = df1.merge(df2, on=df1.index)
#renaming the columns
df_riskpremiumEmploymentStatus.rename(columns={'key_0':'EmploymentStatus'}, inplace=True)
#setting state to index
df_riskpremiumEmploymentStatus.set_index("EmploymentStatus", inplace=True)
#calculating the risk premium per EmploymentStatus
df_riskpremiumEmploymentStatus['Total Claim Amount'] = df_riskpremiumEmploymentStatus['Total Claim Amount'].round(0) #round off to the whole number
#find the risk premium
df_riskpremiumEmploymentStatus["Risk Premium"] = df_riskpremiumEmploymentStatus['Total Claim Amount']/df_riskpremiumEmploymentStatus['Number of Policies']
df_riskpremiumEmploymentStatus

"""**Calculating the risk premium per Gender**"""

df1 = df.groupby(['Gender']).sum()[['Total Claim Amount']]
df2 = df.groupby(['Gender']).count()[['Number of Policies']]
#adding the two dataset together
df_riskpremiumGender = df1.merge(df2, on=df1.index)
#renaming the columns
df_riskpremiumGender.rename(columns={'key_0':'Gender'}, inplace=True)
#setting state to index
df_riskpremiumGender.set_index("Gender", inplace=True)
#calculating the risk premium per state
df_riskpremiumGender['Total Claim Amount'] = df_riskpremiumGender['Total Claim Amount'].round(0) #round off to the whole number
#find the risk premium
df_riskpremiumGender["Risk Premium"] = df_riskpremiumGender['Total Claim Amount']/df_riskpremiumGender['Number of Policies']
df_riskpremiumGender

"""**Calculating the risk premium per Vehicle Class**"""

df1 = df.groupby(['Vehicle Class']).sum()[['Total Claim Amount']]
df2 = df.groupby(['Vehicle Class']).count()[['Number of Policies']]
#adding the two dataset together
df_riskpremiumVehicleClass = df1.merge(df2, on=df1.index)
#renaming the columns
df_riskpremiumVehicleClass.rename(columns={'key_0':'Vehicle Class'}, inplace=True)
#setting state to index
df_riskpremiumVehicleClass.set_index("Vehicle Class", inplace=True)
#calculating the risk premium per state
df_riskpremiumVehicleClass['Total Claim Amount'] = df_riskpremiumVehicleClass['Total Claim Amount'].round(0) #round off to the whole number
#find the risk premium
df_riskpremiumVehicleClass["Risk Premium"] = df_riskpremiumVehicleClass['Total Claim Amount']/df_riskpremiumVehicleClass['Number of Policies']
df_riskpremiumVehicleClass

plt.pie(df_riskpremiumVehicleClass[["Risk Premium"]], labels=df_riskpremiumVehicleClass.index, explode=[0.1,0,0,0.1,0.1,0.1], shadow=True, autopct="%1.1f%%")
plt.show()

"""**Calculating the risk premium per Vehicle Size**"""

df1 = df.groupby(['Vehicle Size']).sum()[['Total Claim Amount']]
df2 = df.groupby(['Vehicle Size']).count()[['Number of Policies']]
#adding the two dataset together
df_riskpremiumVehicleSize = df1.merge(df2, on=df1.index)
#renaming the columns
df_riskpremiumVehicleSize.rename(columns={'key_0':'Vehicle Size'}, inplace=True)
#setting state to index
df_riskpremiumVehicleSize.set_index("Vehicle Size", inplace=True)
#calculating the risk premium per Vehicle Size
df_riskpremiumVehicleSize['Total Claim Amount'] = df_riskpremiumVehicleSize['Total Claim Amount'].round(0) #round off to the whole number
#find the risk premium
df_riskpremiumVehicleSize["Risk Premium"] = df_riskpremiumVehicleSize['Total Claim Amount']/df_riskpremiumVehicleSize['Number of Policies']
df_riskpremiumVehicleSize

"""**Calculating the risk premium per Policy Type**"""

df1 = df.groupby(['Policy Type']).sum()[['Total Claim Amount']]
df2 = df.groupby(['Policy Type']).count()[['Number of Policies']]
#adding the two dataset together
df_riskpremiumPolicyType = df1.merge(df2, on=df1.index)
#renaming the columns
df_riskpremiumPolicyType.rename(columns={'key_0':'Policy Type'}, inplace=True)
#setting state to index
df_riskpremiumPolicyType.set_index("Policy Type", inplace=True)
#calculating the risk premium per Vehicle Size
df_riskpremiumPolicyType['Total Claim Amount'] = df_riskpremiumPolicyType['Total Claim Amount'].round(0) #round off to the whole number
#find the risk premium
df_riskpremiumPolicyType["Risk Premium"] = df_riskpremiumPolicyType['Total Claim Amount']/df_riskpremiumPolicyType['Number of Policies']
df_riskpremiumPolicyType

"""**Calculating the risk premium per Coverage**"""

df1 = df.groupby(['Coverage']).sum()[['Total Claim Amount']]
df2 = df.groupby(['Coverage']).count()[['Number of Policies']]
#adding the two dataset together
df_riskpremiumCoverage = df1.merge(df2, on=df1.index)
#renaming the columns
df_riskpremiumCoverage.rename(columns={'key_0':'Coverage'}, inplace=True)
#setting state to index
df_riskpremiumCoverage.set_index("Coverage", inplace=True)
#calculating the risk premium per Vehicle Size
df_riskpremiumCoverage['Total Claim Amount'] = df_riskpremiumCoverage['Total Claim Amount'].round(0) #round off to the whole number
#find the risk premium
df_riskpremiumCoverage["Risk Premium"] = df_riskpremiumCoverage['Total Claim Amount']/df_riskpremiumCoverage['Number of Policies']
df_riskpremiumCoverage

"""**Calculating the risk premium per Marital Status**"""

df1 = df.groupby(['Marital Status']).sum()[['Total Claim Amount']]
df2 = df.groupby(['Marital Status']).count()[['Number of Policies']]
#adding the two dataset together
df_riskpremiumMaritalStatus = df1.merge(df2, on=df1.index)
#renaming the columns
df_riskpremiumMaritalStatus.rename(columns={'key_0':'Marital Status'}, inplace=True)
#setting state to index
df_riskpremiumMaritalStatus.set_index("Marital Status", inplace=True)
#calculating the risk premium per Vehicle Size
df_riskpremiumMaritalStatus['Total Claim Amount'] = df_riskpremiumMaritalStatus['Total Claim Amount'].round(0) #round off to the whole number
#find the risk premium
df_riskpremiumMaritalStatus["Risk Premium"] = df_riskpremiumMaritalStatus['Total Claim Amount']/df_riskpremiumMaritalStatus['Number of Policies']
df_riskpremiumMaritalStatus







"""# **Averange office premium**

4. Depending on yearly office premium and risk premium, the ratio
can be calculated by the formula

k = AOP/RP

where:

*   **AOP**: Averange office premium for year i
*   **RP**: Risk premium for year i
*   **ki**: denotes the ratio of office premium to risk premium for
year i.

**Averange office premium for the state**
"""

#Getting the avg office premium for State from first dataset
df_k1 = df_premiuns[["Avg office premium per policies"]]
#Getting the risk premium for State from first dataset
df_k2 = df_riskpremiumstate[["Risk Premium"]]
#merging the columns together
df_OPR = df_k1.merge(df_k2, on=df_k1.index)
#Renaming the column to state
df_OPR.rename(columns={'key_0':'State'}, inplace=True)
#setting the column to Index
df_OPR.set_index("State", inplace=True)
#Calculating the ratio for Averange Office Premium for each state
df_OPR["Office_Premium/RP Ratio"] = df_OPR['Avg office premium per policies']/df_OPR['Risk Premium']
#displaying the table
df_OPR

"""**Averange office premium for the Response**"""

#Getting the avg office premium for Response from first dataset
df_k1 = df_premiunR[["Avg office premium per policies"]]
#Getting the risk premium for Response from first dataset
df_k2 = df_riskpremiumResponse[["Risk Premium"]]
#merging the columns together
df_OPR = df_k1.merge(df_k2, on=df_k1.index)
#Renaming the column to Response
df_OPR.rename(columns={'key_0':'Response'}, inplace=True)
#setting the column to Index
df_OPR.set_index("Response", inplace=True)
#Calculating the ratio for Averange Office Premium for each Response
df_OPR["Office_Premium/RP Ratio"] = df_OPR['Avg office premium per policies']/df_OPR['Risk Premium']
#displaying the table
df_OPR

"""**Averange office premium for the Education**"""

#Getting the avg office premium for Education from first dataset
df_k1 = df_premiunE[["Avg office premium per policies"]]
#Getting the risk premium for Education from first dataset
df_k2 = df_riskpremiumEducation[["Risk Premium"]]
#merging the columns together
df_OPR = df_k1.merge(df_k2, on=df_k1.index)
#Renaming the column to Education
df_OPR.rename(columns={'key_0':'Education'}, inplace=True)
#setting the column to Index
df_OPR.set_index("Education", inplace=True)
#Calculating the ratio for Averange Office Premium for each Education
df_OPR["Office_Premium/RP Ratio"] = df_OPR['Avg office premium per policies']/df_OPR['Risk Premium']
#displaying the table
df_OPR

"""**Averange office premium for the EmploymentStatus**"""

#Getting the avg office premium for EmploymentStatus from first dataset
df_k1 = df_premiunES[["Avg office premium per policies"]]
#Getting the risk premium for EmploymentStatus from first dataset
df_k2 = df_riskpremiumEmploymentStatus[["Risk Premium"]]
#merging the columns together
df_OPR = df_k1.merge(df_k2, on=df_k1.index)
#Renaming the column to EmploymentStatus
df_OPR.rename(columns={'key_0':'EmploymentStatus'}, inplace=True)
#setting the column to Index
df_OPR.set_index("EmploymentStatus", inplace=True)
#Calculating the ratio for Averange Office Premium for each EmploymentStatus
df_OPR["Office_Premium/RP Ratio"] = df_OPR['Avg office premium per policies']/df_OPR['Risk Premium']
#displaying the table
df_OPR

"""**Averange office premium for the Gender**"""

#Getting the avg office premium for Gender from first dataset
df_k1 = df_premiunG[["Avg office premium per policies"]]
#Getting the risk premium for Gender from first dataset
df_k2 = df_riskpremiumGender[["Risk Premium"]]
#merging the columns together
df_OPR = df_k1.merge(df_k2, on=df_k1.index)
#Renaming the column to Gender
df_OPR.rename(columns={'key_0':'Gender'}, inplace=True)
#setting the column to Index
df_OPR.set_index("Gender", inplace=True)
#Calculating the ratio for Averange Office Premium for each Gender
df_OPR["Office_Premium/RP Ratio"] = df_OPR['Avg office premium per policies']/df_OPR['Risk Premium']
#displaying the table
df_OPR

"""**Averange office premium for the Vehicle Class**"""

#Getting the avg office premium for Vehicle Class from first dataset
df_k1 = df_premiunVC[["Avg office premium per policies"]]
#Getting the risk premium for Vehicle Class from first dataset
df_k2 = df_riskpremiumVehicleClass[["Risk Premium"]]
#merging the columns together
df_OPR = df_k1.merge(df_k2, on=df_k1.index)
#Renaming the column to Vehicle Class
df_OPR.rename(columns={'key_0':'Vehicle Class'}, inplace=True)
#setting the column to Index
df_OPR.set_index("Vehicle Class", inplace=True)
#Calculating the ratio for Averange Office Premium for each Vehicle Class
df_OPR["Office_Premium/RP Ratio"] = df_OPR['Avg office premium per policies']/df_OPR['Risk Premium']
#displaying the table
df_OPR

"""**Averange office premium for the Vehicle Size**"""

#Getting the avg office premium for 'Vehicle Size from first dataset
df_k1 = df_premiunVS[["Avg office premium per policies"]]
#Getting the risk premium for 'Vehicle Size from first dataset
df_k2 = df_riskpremiumVehicleSize[["Risk Premium"]]
#merging the columns together
df_OPR = df_k1.merge(df_k2, on=df_k1.index)
#Renaming the column to 'Vehicle Size
df_OPR.rename(columns={'key_0':'Vehicle Size'}, inplace=True)
#setting the column to Index
df_OPR.set_index("Vehicle Size", inplace=True)
#Calculating the ratio for Averange Office Premium for each 'Vehicle Size
df_OPR["Office_Premium/RP Ratio"] = df_OPR['Avg office premium per policies']/df_OPR['Risk Premium']
#displaying the table
df_OPR







"""# **Fixed claim frequency rate**"""

df.columns

"""A **fixed claim frequency rate** can be calculated depending on the
**total number of policies** and the **total number of claims**.
In fact, **claim frequency rate** is the **ratio** of the **number of claims** in a **period** to the **exposure to risk** for this **period**. The **main problem** in **calculating claim frequency rate** is to **find the exposure to risk** can be **calculated** by various methods. One of them is the **Census Method**.

Let **N(t)** denote the **number of policies** booked by the **insurance**
**company** at **time t**. During the short interval of time **δt** immediately following **time t**, the **change** in **the number of policyholders** a premium will be **negligible**.
Each of the **N(t) premium policyholders** currently on the books will **contribute δt years** of **exposure** during that **small time interval** so that the total number of years’ exposure during the interval of **time δt** following time t will be **N(t)δt** .

The total exposure during 1997-1998 will, therefore, be approximately

      ∑ N(t)δt
    t=0 to 1
    in steps
    of δt

the calculation becomes more and more accurate the smaller δt
becomes, and exact when δt becomes too small. Then in mathematical terms dt
is written instead of δt , and becomes

Intergral (N(t)dt)

from 1 to 0


i.e. the area under the N(t) curve between t=0 and t=1.

For example, when data given in Table 4.2 is considered Figure 4.1 is the
approximate graph of N(t).
"""

#graphs indicating the number of policies from jan to feb
df.groupby(['Effective To Date']).sum()[["Number of Policies"]].plot(kind='line', figsize=(15,10))
plt.title("Number of policies over 2 month period", fontdict={"fontsize":25})
plt.ylabel("Number of Policies", fontdict={"fontsize":20})
plt.xlabel("Effective Date", fontdict={"fontsize":20})
plt.show()

"""**The area under N(t) curve is**

![image.png](data:image/png;base64,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)

and is calculated to be 481, since the number of claims during this
period is reported to be 183, the claim frequency rate is said to be 183/481 and
equals 0.38.

When the period is extended to k years and total number of claims
booked each year are assumed to be exposure to risk for that year, then **total** **exposure to risk** becomes **N1+N2+...+Nk.**. The total number of claims given by **C1+C2+...+Ck**. therefore yields the **claim frequency rate** to be calculated by the formula:

![Capture.PNG](data:image/png;base64,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)


where **m** is the **claim frequency rate** which is assumed to be **constant**
during **k years**.
"""

#The frequency claim rate (risk premium rate) for a period from jan to feb 2011

df["Total Claim Amount"].sum()/df["Number of Policies"].count()

"""6. On the implications of the **mean claim sizes** and **total number** **of** **claims booked** by the company the **growth rate** can be **calculated**. In the **growth rates** **geometric progression** can be **assumed** or both **geometric and arithmetic progressions** can be assumed."""

df.columns

























"""# **Testing Other Variables**"""

df.head()

df["Renew Offer Type"].value_counts()

df.groupby(["Renew Offer Type"]).sum()

df["Sales Channel"].value_counts()

df["Number of Open Complaints"].value_counts()





